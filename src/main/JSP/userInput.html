<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Input</title>

  <style>

  body {
  position: absolute;
  width: 100%;
  height:100%;
  text-align: center;
}
 #inputForm {
  position: relative;
  top: 100%;
  z-index: 1000;
 }

 #freeSpaceReport {
  border: line;
  color: black;
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  margin: 4px 2px;
  cursor: pointer;
  background-color: #e3c091;
}

  </style>
</head>
<body>
  <div id="inputForm">
     <form action="/submit" method="post" id="">
       <input type="button" id="freeSpaceReport" name="reportButton" onClick="reportButtonClickHandler()" value="Click to free up your space!">
     </form>
  </div>

<script>
  function reportButtonClickHandler() { 
    //When the user clicks the button, the getCurrentPosition() is called to get the coordinates,
    // then it creates a JSON object and sends a request to the server 
    navigator.geolocation.getCurrentPosition(function(position) {
    const latitude = position.coords.latitude;
    const longitude = position.coords.longitude;
    const data = { latitude, longitude };
    const options = {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    };
    fetch('http://localhost/8080/location', options)
      .then(response => {
        if (!response.ok) {
          throw new Error('Failed to send location data');
        }
        console.log('Location data sent successfully');
      })
      .catch(error => {
        console.error(error);
      });
  }, function(error) {
    console.error(error);
  });
    alert('Thank you for your input');
  }
</script>
</body>
</html>